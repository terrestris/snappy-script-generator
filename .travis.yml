language: java

cache:
  directories:
  - "$HOME/.m2"

sudo: false

jdk:
- oraclejdk8
- openjdk8

env:
  global:
    - secure: "WrFUbDduNH9IFTP9f0MsN7EmlWbii6K2FplWgMiT+v81bfLYjviCLgZ9/v9vAP/YNrTfUu5MvmbXr7VZ8MTPW6W+Sje/ZcUWX4LJLB6zr2YSW9uyu44wyOTKD3qP0BRoKIWypTtFKVmymrMK6W4q4FpWSUCe8Vcwl9tMAktKtDRSf4BxgtyEtiA/Joz4nUlyrQbnVSiigpyil3pHDTS9Ly2Znd1Oo1wYPGsId3nx7pnxY2NrMsQlrclAftXt5S3nb8Ixrx3qeiCK96MSondRFIsXE8ET1ASekuATcGkyVh/KdeNf79/F3wADIkVcHTqWzUglaoTdBmFWyvV5a9f1pdhHUSk6Sc7RLOplwuvasy1ns30RUvDyGu+AXxdSbRWnGzKP0TwuzjLCFYp/6lMX26pF1/NWXmbFP3sd/0gor2r6sx+9bqzM6B9fqIlXFg1jFHURTwCOhbiB92ijT9XNV9FzlsgGBhcU2mznnxWNSF6dVi7/keIr3f+nW3RcKFmKmzLBnBRxnHu5z0+nl/s8pX0+cz11KhY7mzJVoElj3IxDxtj+1zlD88yvmnq/NEsylds91aVvreUUnjy0SEdwcZ2PzRX+pk89PDPUUjJxn0YIqOWW4jh0FCTrLPHApe8hpYieDkxtgnQ80iWoAVGwCVrMoiwK6olp+PT9qIBPcCY="

script:
  - mkdir -p $HOME/.m2
  - echo "<settings xmlns='http://maven.apache.org/SETTINGS/1.0.0'><servers><server><id>nexus.terrestris.de-snapshots</id><username>gs-deploy</username><password>$DEPLOY_PASSWORD</password></server></servers></settings>" > $HOME/.m2/settings.xml
  - if [ "$TRAVIS_BRANCH" == "master" -a "$TRAVIS_PULL_REQUEST" == "false" ]; then mvn --batch-mode clean deploy; fi
  - if [ "$TRAVIS_BRANCH" != "master" -o "$TRAVIS_PULL_REQUEST" != "false" ]; then mvn --batch-mode clean install; fi

notifications:
  email:
    on_success: never
    on_failure: never
